<div class="booking-screen">
    <div class="body-relative relative">
        <div class="top-navigator">
            <span>Đặt lịch giữ chỗ</span>
        </div>
        <div class="main-screen">
            <div class="main-screen__block main-screen__block--active">
                <div class="first-item"></div>
                <div class="title-header__booking">
                    1. Chọn salon
                </div>
                <div class="bot-message">
                    <img src="https://30shine.com/static/media/bot_avatar_1654_1.26e1da41.jpg" alt="">
                    <div class="content-message">
                        <p>
                            Đầu tiên anh {{{name}}} chọn "Tìm salon gần anh" ở ngay bên dưới để tìm Salon
                            thuận tiện nhất nhé!
                        </p>
                    </div>
                </div>
                <div class="item-center">
                    <div class="salon-icon">
                        <img src="https://30shine.com/static/media/homeOutline.76facfa5.svg" alt="">
                        <div class="salon-icon--active">
                            <div class="salon-icon--active__iner"></div>
                            <div class="salon-icon--active__outner"></div>
                        </div>
                    </div>

                    <div class="salon-title">
                        {{{street}}}
                    </div>

                    <div class="salon-icon--right">
                        <img src="https://30shine.com/static/media/caretRight.1e56cad1.svg" alt="">
                    </div>
                </div>
                <div class="text-validate">Anh vui lòng chọn salon trước để xem lịch còn trống ạ!</div>
            </div>
            <div class="main-screen__block">
                <div class="title-header__booking">
                    2. Chọn dịch vụ
                </div>
                <div class="bot-message">
                    <img src="https://30shine.com/static/media/bot_avatar_1654_1.26e1da41.jpg" alt="">
                    <div class="content-message">
                        <p>
                            Anh {{{name}}} chọn trước dịch vụ bên dưới để chúng em chuẩn bị chu đáo ạ
                        </p>
                    </div>
                </div>
                <div class="item-center">
                    <div class="salon-icon">
                        <img src="https://30shine.com/static/media/service.3a62b101.svg" alt="">
                        <div class="salon-icon--active">
                            <div class="salon-icon--active__iner"></div>
                            <div class="salon-icon--active__outner"></div>
                        </div>
                    </div>
                    <div class="salon-title service-title">
                        {{lengthService}}
                    </div>
                    <div class="salon-icon--right">
                        <img src="https://30shine.com/static/media/caretRight.1e56cad1.svg" alt="">
                    </div>
                </div>
                <div class="block-box">
                    {{#if isHaveName}}
                    <div class="mt-4">
                        <div style="display:flex;flex-wrap: wrap;margin-left: -0.375rem;margin-right: -0.375rem;">
                            {{#each nameServiceBooked}}
                            <div class="name-service__booked">
                                {{this}}
                            </div>
                            {{/each}}
                        </div>
                    </div>
                    {{/if}}
                </div>
            </div>
            <div class="main-screen__block">
                <div class="title-header__booking">
                    3. Chọn ngày, giờ & stylist
                </div>
                <div class="bot-message">
                    <img src="https://30shine.com/static/media/bot_avatar_1654_1.26e1da41.jpg" alt="">
                    <div class="content-message">
                        <p>
                            Anh {{{name}}} chọn ngày giờ và stylist riêng cho mình ạ
                        </p>
                    </div>
                </div>
                <div class="item-center">
                    <div class="salon-icon">
                        <img src="https://30shine.com/static/media/calendar-2.3c77d299.svg" alt="">
                        <div class="salon-icon--active">
                            <div class="salon-icon--active__iner"></div>
                            <div class="salon-icon--active__outner"></div>
                        </div>
                    </div>
                    <div class="salon-title__item">
                        <div class="salon-title__item--center">
                            <span>Hôm nay,
                            </span>
                            <span>
                                T2(21/3)
                            </span>
                        </div>
                        {{!-- <div class="salon-title__item--type-date">
                            Ngày thường
                        </div> --}}
                    </div>
                    <div class="salon-icon--right">
                        <img src="https://30shine.com/static/media/caretRight.1e56cad1.svg" alt="">
                    </div>
                </div>
            </div>

        </div>
        <div class="bottom"></div>
    </div>
</div>
<form id="chooseStore" action="/booking/?phone={{_user.phoneUser}}&storeId=0&step=1" method="POST"></form>

<script>
    const itemCenter = document.querySelectorAll('.item-center');
    const formChooseStore = document.getElementById('chooseStore');
    const urlBook = window.location.href;
    const arrUrl = urlBook.split("&");
    const mainScrActive = document.querySelector('.main-screen__block--active');
    const mainScr = document.querySelectorAll('.main-screen__block');
    const iconActive = document.querySelectorAll('.salon-icon--active');
    const botMessage = document.querySelectorAll('.bot-message');
    const textValidate = document.querySelectorAll('.text-validate');
    const salonTitle = document.querySelector('.service-title');

    itemCenter[0].addEventListener('click', () => {
        formChooseStore.action = `${arrUrl[0]}&${arrUrl[1]}&step=1`;
        formChooseStore.submit();
    })
    if (arrUrl[1] !== 'storeId=0') {
        iconActive[0].style.display = 'none';
        botMessage[0].style.display = 'none';
        if (salonTitle.innerHTML.trim() == 'Xem tất cả dịch vụ hấp dẫn') {
            mainScr[1].classList.add('main-screen__block--active');
            mainScr[0].classList.add('main-screen__block--done');
            mainScr[0].classList.remove('main-screen__block--active');
            iconActive[1].style.display = 'flex';
            botMessage[1].style.display = 'flex';
        } else {
            mainScr[0].classList.add('main-screen__block--done');
            mainScr[0].classList.remove('main-screen__block--active');
            mainScr[2].classList.add('main-screen__block--active');
            mainScr[1].classList.add('main-screen__block--done');
            mainScr[1].classList.remove('main-screen__block--active');
            iconActive[1].style.display = 'none';
            iconActive[2].style.display = 'flex';
            botMessage[1].style.display = 'none';
            botMessage[2].style.display = 'flex';
        }
    } else if (arrUrl[1] === 'storeId=0') {
        botMessage[0].style.display = 'flex';
        iconActive[0].style.display = 'flex';
    }

    itemCenter[1].addEventListener('click', () => {
        if (arrUrl[1] === 'storeId=0') {
            textValidate[0].style.color = '#f46969';
            textValidate[0].style.display = 'block';
            itemCenter[0].style.borderColor = '#f46969';
            itemCenter[0].style.borderWidth = '1px';
            itemCenter[0].style.borderStyle = 'solid';
        } else {
            formChooseStore.action = `${arrUrl[0]}&${arrUrl[1]}&step=2`;
            formChooseStore.submit();
        }
    })
</script>